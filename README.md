# Full-Stack E-commerce Customer Dashboard

This project is a full-stack web application built to display customer and order data from an e-commerce dataset. It features a Node.js/Express backend that serves data from a SQLite database and a React frontend that provides a user-friendly interface to view the data.

## Features

- **Backend API:** A robust RESTful API built with Node.js and Express.
- **Relational Database:** Uses SQLite to store and manage customer, order, and product data.
- **Data Loading:** Includes a script to efficiently load and parse large CSV datasets into the database.
- **React Frontend:** A dynamic and responsive frontend built with React to display the data.
- **Customer List:** View a searchable list of all customers.
- **Order History:** Click on a customer to view their complete order history in a clean, modal view.
- **Error Handling:** Both the backend and frontend include robust error handling and loading states.

## Project Structure

```text
/
├── archive/              # Contains the source .csv data files
├── client/               # Contains the React frontend application
│   ├── public/
│   └── src/
├── .gitignore
├── ecommerce.db          # The SQLite database file (generated by loadData.js)
├── loadData.js           # Script to load CSV data into the database
├── package.json
├── package-lock.json
└── server.js             # The main Node.js/Express backend server file
```

## Setup and Installation

### Prerequisites

- [Node.js](https://nodejs.org/) (v14 or later)
- [npm](https://www.npmjs.com/) (comes with Node.js)

### 1. Backend Setup

First, set up the server and populate the database.

1. **Navigate to the project root directory.**

2. **Install backend dependencies:**

   ```bash
   npm install express sqlite3 cors
   ```

3. **Create and Populate the Database:**
   Place the `archive` folder containing all the `.csv` files in the project root. Then, run the data loading script. This will create an `ecommerce.db` file.

   ```bash
   node loadData.js
   ```

    #### Note: The script is optimized to load a sample of 5,000 rows from each file to ensure a fast setup.*

4. **Start the Backend Server:**

   ```bash
   node server.js
   ```

   The server will start on `http://localhost:5000`.

### 2. Frontend Setup

Next, set up the React client application.

1. **Navigate to the `client` directory** in a separate terminal:

   ```bash
   cd client
   ```

2. **Install frontend dependencies:**

   ```bash
   npm install
   ```

3. **Start the Frontend Application:**

   ```bash
   npm start
   ```

   #### The React application will open in your browser at `http://localhost:3000`.

## API Endpoints

The backend server provides the following RESTful API endpoints:

### `GET /api/users`

- **Description:** Retrieves a list of customers, including their name, email, location, and a count of their total orders.
- **Success Response (200 OK):**

  ```json
  [
    {
      "id": 1,
      "first_name": "John",
      "last_name": "Doe",
      "email": "john.doe@example.com",
      "country": "USA",
      "city": "New York",
      "order_count": 5
    },
    ...
  ]
  ```

### `GET /api/users/:userId/orders`

- **Description:** Retrieves a list of all orders for a specific customer.
- **URL Params:** `userId` (integer, required)
- **Success Response (200 OK):**

  ```json
  [
    {
      "order_id": 123,
      "status": "Complete",
      "created_at": "2023-10-26T10:00:00.000Z",
      "num_of_item": 2
    },
    ...
  ]
  ```

### `GET /api/orders/:orderId`

- **Description:** Retrieves the specific details for a single order, including all line items.
- **URL Params:** `orderId` (integer, required)
- **Success Response (200 OK):**

  ```json
  {
    "order_id": 123,
    "user_id": 1,
    "status": "Complete",
    "items": [
      {
        "order_item_id": 456,
        "sale_price": 29.99,
        "product_name": "Classic T-Shirt"
      },
    ]
  }

  ```
